{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div id="flash-messages" class="toast toast-top toast-end mt-20 z-[1000]">
            {% for category, message in messages %}
                <div class="alert alert-{{ 'success' if category == 'success' else 'error' if category == 'danger' or category == 'error' else 'info' }} shadow-lg rounded-2xl border-0 flex items-center gap-2 pr-4 transition-all duration-300 transform translate-x-0" id="toast-{{ loop.index }}">
                    <span>{{ message }}</span>
                    <button type="button" class="btn btn-ghost btn-xs btn-circle" onclick="this.parentElement.remove()">âœ•</button>
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const duration = 5000;
        const flashMessages = document.querySelector('#flash-messages');
        if (!flashMessages) return;

        const alerts = flashMessages.querySelectorAll('.alert');
        
        alerts.forEach((alert, index) => {
            setTimeout(() => {
                alert.classList.add('opacity-0', 'translate-x-full');
                setTimeout(() => alert.remove(), 400);
            }, duration);
        });
    });
</script>
